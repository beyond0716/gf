<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no"><meta name="format-detection" content="telephone=no"><script type="text/javascript" src="../plugins/jquery/jQuery/1.12.4/jquery-1.12.4.min.js"></script><title></title><style>* {margin: 0;padding: 0;}ul, ol {list-style-position: inside;}</style></head><body><input type="text" data-length='10' id='limitLength' data-remainingCharacters="charActers1" data-model='Ch' name="lname"/><p>还可以输入<span id="charActers1">10</span>字符</p><input id='hintInput' data-hint='我是提示信息' type='password' value=''style="height: 24px;padding: 2px 5px;line-height: 24px;border: 1px solid #cccccc;"><input id="passwordStrength" data-hint='请输入密码' type="password"> <span id="showStrength"></span><input type="text" id="cursorPos" value="光标永远停留在文字最后"><script>function isChinese(t){return/[\u4e00-\u9fa5]/g.test(t)}function isAllEnglish(t){return strArr=Array.prototype.slice.call(t),strArr.every(function(t){return!isChinese(t)})}function trim(t){return(t||"").replace(/^(\s|00a0)+|(\s|00a0)+$/g,"")}function setCss(t,e){if(t&&t.style&&3!=t.nodeType&&8!=t.nodeType){for(var n in e)t.style[n]=e[n];return t}}function passwordStrength(t,e){var n=function(t){return t>=48&&t<=57?1:t>=97&&t<=122?2:3},r=["red","yellow","orange","green"],s=["密码太短","弱","中","强"];t.onkeyup=function(t){var o=trim(this.value),i=o.length,a=0,u=0;if(i<6)e.innerHTML=s[0],setCss(e,{color:r[0]});else{for(;u<i;u++)a+=n(o.toLowerCase().charCodeAt(u));a<10?(e.innerHTML=s[1],setCss(e,{color:r[1]})):a>=10&&a<15?(e.innerHTML=s[2],setCss(e,{color:r[2]})):a>=15&&(e.innerHTML=s[3],setCss(e,{color:r[3]}))}}}function cursorToEnd(){var t=this.value.length;if(this.setSelectionRange)this.setSelectionRange(t,t);else{var e=this.createTextRange();e.moveStart("character",t),e.collapse(!0),e.select()}}var strLen=function(){var t=function(t){return(t||"").replace(/^(\s|\u00A0)+|(\s|\u00A0)+$/g,"")};return function(e,n){e=t(e),n=n||"Ch";var r=e.length;if(0==r)return 0;var s=e.match(/[\u4e00-\u9fa5]/g);return r+(s&&"Ch"==n?s.length:0)}}(),limitLength=document.getElementById("limitLength"),charActers1=document.getElementById("charActers1"),clearMore=function(t){var e=t.value,n=e.length,r=t.getAttribute("data-model"),s=t.getAttribute("data-length"),o=t.getAttribute("data-remainingCharacters"),i=s;if("Ch"==r)if(n=strLen(e,r),e=e.substr(0,s),isAllEnglish(e))i=s;else for(var a=0,u=0;u<e.length;u++)if(isChinese(e[u])?a+=2:a+=1,a>=s-1){i=u+1;break}if(n>s&&(t.value=e.substr(0,i)),o){var l=n?n>s?0:s-n:s;charActers1.innerHTML=l}};limitLength.onfocus=function(){clearMore(this)},limitLength.onkeyup=function(){clearMore(this)},limitLength.onblur=function(){clearMore(this)};var setCss=function(t,e){if(t&&t.style&&3!=t.nodeType&&8!=t.nodeType){for(var n in e)t.style[n]=e[n];return t}},hintInput=document.getElementById("hintInput"),dataHint=hintInput.getAttribute("data-hint"),_span=document.createElement("span");_span.innerHTML=dataHint,_span.id="hint0",_span.className="hintInput",console.log(hintInput.offsetLeft),setCss(_span,{position:"absolute",left:hintInput.offsetLeft+6+"px",top:hintInput.offsetTop+3+"px",zIndex:2,display:"block",height:"24px",lineHeight:"24px"}),hintInput.value="",hintInput.parentNode.insertBefore(_span,hintInput),_span.onclick=hintInput.onfocus=function(t){setCss(_span,{display:"none"}),hintInput.focus()},hintInput.onblur=function(t){this.value.replace(/^(\s|\u00A0)+|(\s|\u00A0)+$/g,"")||setCss(_span,{display:"block"})};var passwordStrengthEl=document.getElementById("passwordStrength"),showStrengthEl=document.getElementById("showStrength");passwordStrength(passwordStrengthEl,showStrengthEl);var cursorPos=document.getElementById("cursorPos");cursorPos.onclick=cursorPos.onkeyup=cursorToEnd;</script></body></html>